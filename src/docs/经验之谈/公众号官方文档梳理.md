# 公众号官方文档梳理

## 开发前必读

### 官方文档

[微信公众号官方文档](https://developers.weixin.qq.com/doc/offiaccount/Getting_Started/Overview.html)

### openID

- 每个用户针对每个公众号会产生一个安全的OpenID，即**每个公众号即使是同一用户openID也不同**
- 如果需要在多公众号、移动应用之间做用户共通，则需前往[微信开放平台](https://open.weixin.qq.com/)，将这些公众号和应用绑定到一个开放平台账号下，绑定后，一个用户虽然对多个公众号和应用有多个不同的OpenID，但他对所有这些同一开放平台账号下的公众号和应用，只有一个UnionID，可以在用户管理-获取用户基本信息（UnionID机制）文档了解详情

### 平台注意事项

- 在申请到认证公众号之前，你可以先通过测试号申请系统，快速申请一个接口测试号，立即开始接口测试开发
- 微信公众平台开发是指为微信公众号进行业务开发，为移动应用、PC端网站、公众号第三方平台（为各行各业公众号运营者提供服务）的开发，请前往微信开放平台接入

### 消息会话

四种消息

- 群发消息：公众号可以以一定频次（订阅号为每天1次，服务号为每月4次），向用户群发消息，包括文字消息、图文消息、图片、视频、语音等
- 被动回复消息：在用户给公众号发消息后，微信服务器会将消息发到开发者预先在开发者中心设置的服务器地址（开发者需要进行消息真实性验证），公众号可以在5秒内做出回复，可以回复一个消息，也可以回复命令告诉微信服务器这条消息暂不回复。被动回复消息可以设置加密（在公众平台官网的开发者中心处设置，设置后，按照消息加解密文档来进行处理。其他3种消息的调用因为是API调用而不是对请求的返回，所以不需要加解密）
- 客服消息：用户在公众号内发消息/触发特定行为后，公众号可以给用户发消息
- 模板消息：在需要对用户发送服务通知（如刷卡提醒、服务预约成功通知等）时，公众号可以用特定内容模板，主动向用户发送消息

### 公众号内网页

许多复杂的业务场景，需要通过网页形式来提供服务，这时需要用到：

- 网页授权获取用户基本信息：通过该接口，可以获取用户的基本信息（获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意）

- 微信JS-SDK：是开发者在网页上通过JavaScript代码使用微信原生功能的工具包，开发者可以使用它在网页上录制和播放微信语音、监听微信分享、上传手机本地图片、拍照等许多能力

### 配置

- 填写配置 url填写：http://外网IP/wx 。外网IP请到腾讯云购买成功处查询。 http的端口号固定使用80，不可填写其他。 Token：自主设置，这个token与公众平台wiki中常提的access_token不是一回事。这个token只用于验证开发者服务器
- 此处的url就是消息的请求路径，后端路径要与所配置的一致
- 上运行代码，才能修改，否则会因校验不通过修改失败
- 